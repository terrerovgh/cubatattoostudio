---
import SectionWrapper from "../SectionWrapper.astro";
import ColorBends from "../ColorBends.tsx";

interface Props {
  id: string;
  backgroundImage: string;
  title?: string;
  subtitle?: string;
}

const { id, backgroundImage, title, subtitle } = Astro.props;
---

<SectionWrapper id={id} backgroundImage={backgroundImage}>
  {/* ColorBends WebGL background */}
  <div class="color-bends-bg">
    <ColorBends
      client:only="react"
      colors={["#8B5E3C", "#4A3558", "#2E524A"]}
      rotation={25}
      speed={0.06}
      scale={1.3}
      frequency={0.5}
      warpStrength={0.5}
      mouseInfluence={0.12}
      parallax={0.1}
      noise={0.025}
      transparent={false}
      autoRotate={0.4}
      curve={1.2}
    />
  </div>

  {/* Dark vignette — slightly lighter on mobile for better visibility */}
  <div class="hero-vignette"></div>

  {/* Main content — fluid spacing with breathing room */}
  <div class="relative z-[5] flex flex-col items-center text-center px-6 sm:px-8 max-w-3xl mx-auto">
    {/* Logo — prominent with generous top space */}
    <div data-hero="logo" class="w-full mb-6 sm:mb-8">
      <img
        src="/logo.svg"
        alt={title || "Cuba Tattoo Studio"}
        class="w-full max-w-[280px] sm:max-w-lg lg:max-w-xl h-auto mx-auto drop-shadow-[0_4px_32px_rgba(200,149,108,0.15)]"
      />
      {title && <h1 class="sr-only">{title}</h1>}
    </div>

    {/* Decorative gold line — micro pause */}
    <div
      data-hero="line"
      class="w-[30%] sm:w-[25%] h-px mx-auto mb-6 sm:mb-8"
      style="background: linear-gradient(90deg, transparent, var(--color-gold-muted), transparent); transform-origin: center;"
    >
    </div>

    {/* Subtitle — more breathing room before CTA */}
    {
      subtitle && (
        <p
          data-hero="subtitle"
          class="text-fluid-body-lg text-white/55 font-light max-w-md sm:max-w-lg mx-auto tracking-wide leading-relaxed mb-10 sm:mb-12"
        >
          {subtitle}
        </p>
      )
    }

    {/* CTA Button — generous touch target, prominent on mobile */}
    <div data-hero="cta">
      <a
        href="#booking"
        class="prismatic-border group inline-flex items-center justify-center gap-3
               px-8 py-4 min-w-[220px] rounded-2xl
               bg-[var(--color-gold)] text-black font-semibold text-base
               transition-all duration-500 ease-out
               hover:shadow-[0_8px_30px_rgba(200,149,108,0.3)]
               hover:scale-[1.03] active:scale-[0.98]"
      >
        Reserva tu Consulta
        <svg
          class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-0.5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2.5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
        </svg>
      </a>
    </div>
  </div>

  {/* Scroll indicator — safe area aware */}
  <div
    data-hero="scroll"
    class="scroll-indicator absolute bottom-8 pb-[env(safe-area-inset-bottom,0px)] left-1/2 -translate-x-1/2 z-[5] flex flex-col items-center gap-2"
  >
    <span class="text-[10px] uppercase tracking-[0.2em] text-white/30 font-medium">Scroll</span>
    <svg
      class="w-5 h-5 text-white/30"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="1.5"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
    </svg>
  </div>
</SectionWrapper>
