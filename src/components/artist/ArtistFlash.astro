---
interface Props {
    flashPromotions?: {
        title: string;
        price: string;
        images: string[];
        description?: string;
    }[];
    artistName: string;
}

const { flashPromotions } = Astro.props;

if (!flashPromotions || flashPromotions.length === 0) return null;
---

<section class="py-16 md:py-24 bg-neutral-900 border-t border-white/5">
    <div class="max-w-[1800px] mx-auto px-4 md:px-6">
        <div class="text-center mb-12 md:mb-16">
            <h2
                class="text-[10px] md:text-xs font-bold text-neutral-500 tracking-[0.5em] mb-3 md:mb-4 uppercase"
            >
                Available Designs
            </h2>
            <h3
                class="text-3xl md:text-5xl font-bold text-white tracking-tighter"
            >
                FLASH & PROMOTIONS
            </h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {
                flashPromotions.map((item, index) => (
                    <div class="bg-neutral-950 border border-white/5 rounded-sm overflow-hidden group">
                        <!-- Image Carousel -->
                        <div class="aspect-[3/4] overflow-hidden relative group-hover:border-white/10 transition-colors">
                            <div class="flex overflow-x-auto snap-x snap-mandatory h-full scrollbar-hide" id={`carousel-${index}`}>
                                {item.images.map((img) => (
                                    <img
                                        src={img}
                                        alt={item.title}
                                        class="snap-center w-full h-full object-cover shrink-0"
                                    />
                                ))}
                            </div>
                            
                            {/* Scroll Indicators if multiple images */}
                            {item.images.length > 1 && (
                                <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1 z-10">
                                    {item.images.map((_) => (
                                        <div class="w-1.5 h-1.5 rounded-full bg-white/50" />
                                    ))}
                                </div>
                            )}

                             {/* Hint overlay */}
                             <div class="absolute inset-0 bg-gradient-to-t from-neutral-950/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none flex items-end justify-center pb-6">
                                <span class="text-white/80 text-xs tracking-widest uppercase">Swipe to view more</span>
                             </div>
                        </div>

                        <!-- Card Content -->
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="text-xl font-bold text-white uppercase tracking-tighter mb-1">{item.title}</h4>
                                    {item.description && <p class="text-neutral-400 text-xs leading-relaxed line-clamp-2">{item.description}</p>}
                                </div>
                            </div>
                            
                            <button
                                onclick={`
                                    // Open Booking Modal - In a real app we might pass specific flash ID
                                    document.querySelector('button[aria-label="Open Chat"]')?.click();
                                `}
                                class="w-full py-3 bg-white text-black font-bold text-sm tracking-widest uppercase hover:bg-neutral-200 transition-colors flex items-center justify-center gap-2"
                            >
                                <span>Book for {item.price}</span>
                            </button>
                        </div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<style>
    /* Hide scrollbar for Chrome, Safari and Opera */
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    /* Hide scrollbar for IE, Edge and Firefox */
    .scrollbar-hide {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
</style>
