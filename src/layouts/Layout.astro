---
import VisualEffects from "@/components/ui/VisualEffects.astro";
import SEO from "@/components/SEO.astro";
import StructuredData from "@/components/StructuredData.astro";

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  backgroundEffects?: boolean;
  keywords?: string;
  structuredData?: object;
  structuredDataType?: 'LocalBusiness' | 'Person' | 'VisualArtwork' | 'Service' | 'Organization';
  noindex?: boolean;
  canonical?: string;
}

const {
  title = "Cuba Tattoo Studio | Albuquerque, NM",
  description = "Premium tattoo studio in Albuquerque, New Mexico. Specialists in high-quality body art with over 10 years of experience.",
  image = "/images/og-image.jpg",
  backgroundEffects = true,
  keywords = "tattoos albuquerque, tattoo studio new mexico, body art, professional tattoo artist, realism, japanese, blackwork, geometric, minimalist",
  structuredData,
  structuredDataType = 'LocalBusiness',
  noindex = false,
  canonical
} = Astro.props;

// Datos estructurados por defecto para LocalBusiness
const defaultStructuredData = {
  "@context": "https://schema.org",
  "@type": "TattooParlor",
  "name": "Cuba Tattoo Studio",
  "description": "Premium tattoo studio in Albuquerque, New Mexico. Specialists in high-quality body art with over 10 years of experience.",
  "url": "https://cubatattoostudio.com",
  "telephone": "+1-505-XXX-XXXX",
  "email": "info@cubatattoostudio.com",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "[Specific Address]",
    "addressLocality": "Albuquerque",
    "addressRegion": "NM",
    "postalCode": "[Postal Code]",
    "addressCountry": "US"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "35.0844",
    "longitude": "-106.6504"
  },
  "openingHours": [
    "Mo-Fr 10:00-20:00",
    "Sa 10:00-18:00"
  ],
  "priceRange": "$$-$$$",
  "paymentAccepted": ["Cash", "Credit Card", "Venmo", "PayPal"],
  "currenciesAccepted": "USD",
  "sameAs": [
    "https://www.instagram.com/cubatattoostudio",
    "https://www.facebook.com/cubatattoostudio",
    "https://www.google.com/maps/place/cuba-tattoo-studio"
  ]
};

const finalStructuredData = structuredData || defaultStructuredData;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- SEO Mejorado y Meta Tags -->
    <SEO 
      title={title}
      description={description}
      image={image}
      keywords={keywords}
      canonical={canonical}
      noindex={noindex}
      structuredData={finalStructuredData}
    />
    
    <!-- Datos Estructurados Adicionales -->
    <StructuredData 
      type={structuredDataType}
      data={finalStructuredData}
    />
    
    <!-- Additional configuration for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Prefetch para recursos críticos -->
    <link rel="dns-prefetch" href="//www.instagram.com" />
    <link rel="dns-prefetch" href="//www.facebook.com" />
    <link rel="dns-prefetch" href="//maps.googleapis.com" />
  </head>
  <body class="relative overflow-x-hidden">
    <!-- Efectos visuales de fondo -->
    {backgroundEffects && (
      <div class="fixed inset-0 z-0 pointer-events-none">
        <VisualEffects variant="noise" intensity="low" />
        <VisualEffects variant="glow" intensity="low" class="opacity-30" />
        
        <!-- Gradiente base mejorado -->
        <div class="absolute inset-0 bg-gradient-to-br from-cuba-black via-cuba-gray-600 to-cuba-black opacity-80"></div>
        
        <!-- Efectos de luz sutil -->
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-cuba-white rounded-full opacity-2 blur-3xl animate-pulse"></div>
        <div class="absolute bottom-0 right-1/4 w-64 h-64 bg-cuba-gray-400 rounded-full opacity-3 blur-2xl animate-pulse" style="animation-delay: 2s"></div>
        
        <!-- Líneas decorativas sutiles -->
        <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-cuba-white to-transparent opacity-10"></div>
        <div class="absolute bottom-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-cuba-white to-transparent opacity-10"></div>
      </div>
    )}
    
    <!-- Contenido principal -->
    <div class="relative z-10">
      <slot />
    </div>
  </body>
</html>

<style is:global>
  @import "../styles/global.css";
</style>
