---
import Layout from "@/layouts/Layout.astro"
import Header from "@/components/layout/Header.astro"
import Footer from "@/components/layout/Footer.astro"
import Button from "@/components/ui/Button.astro"
import FadeInSection from "@/components/animations/FadeInSection.astro"
import SlideInImage from "@/components/animations/SlideInImage.astro"
import StaggerText from "@/components/animations/StaggerText.astro"
import ParallaxContainer from "@/components/animations/ParallaxContainer.astro"
import PortfolioFilters from "@/components/gallery/PortfolioFilters.astro"
import PortfolioGrid from "@/components/gallery/PortfolioGrid.astro"
import artistsData from "@/data/artists.json"
import stylesData from "@/data/tattoo-styles.json"

const { artists } = artistsData;
const { styles } = stylesData;

// Calcular estadísticas del portfolio
const totalWorks = artists.reduce((total, artist) => total + artist.portfolio.length, 0);
const featuredStyles = styles.filter(style => style.featured);
---

<Layout 
  title="Portfolio Completo | Cuba Tattoo Studio"
  description="Explora nuestra galería completa de tatuajes. Filtra por artista, estilo y más. Trabajos de David, Nina y Karli en Cuba Tattoo Studio, Albuquerque."
>
  <Header />
  
  <main class="pt-20 bg-black min-h-screen">
    <!-- Hero Section Cinematográfico -->
    <ParallaxContainer speed={0.3} intensity="high" class="py-32 bg-gradient-to-b from-black via-gray-900 to-black relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"></div>
      <section class="max-w-6xl mx-auto px-6 relative z-10">
        <div class="text-center space-y-8">
          <StaggerText 
            text="PORTFOLIO COMPLETO"
            element="h1" 
            class="text-6xl md:text-8xl font-bebas text-white tracking-wider"
            delay={0.2}
            staggerDelay={0.08}
          />
          <FadeInSection delay={0.6} intensity="high" class="max-w-4xl mx-auto space-y-6">
            <p class="text-xl md:text-2xl text-gray-300 font-inter leading-relaxed">
              Explora nuestra colección completa de {totalWorks} trabajos realizados por nuestros talentosos artistas. Filtra por estilo, artista o características específicas para encontrar la inspiración perfecta.
            </p>
            <div class="w-32 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto"></div>
          </FadeInSection>
          
          <!-- Estadísticas Cinematográficas -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-12 max-w-4xl mx-auto pt-8">
            <FadeInSection delay={0.8} intensity="medium" class="text-center space-y-4 group">
              <div class="text-5xl md:text-6xl font-bebas text-white mb-3 group-hover:text-gray-300 transition-colors duration-300">
                {totalWorks}
              </div>
              <div class="text-sm font-inter text-gray-400 uppercase tracking-widest">
                TRABAJOS REALIZADOS
              </div>
              <div class="w-16 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </FadeInSection>
            <FadeInSection delay={1.0} intensity="medium" class="text-center space-y-4 group">
              <div class="text-5xl md:text-6xl font-bebas text-white mb-3 group-hover:text-gray-300 transition-colors duration-300">
                {artists.length}
              </div>
              <div class="text-sm font-inter text-gray-400 uppercase tracking-widest">
                ARTISTAS ESPECIALIZADOS
              </div>
              <div class="w-16 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </FadeInSection>
            <FadeInSection delay={1.2} intensity="medium" class="text-center space-y-4 group">
              <div class="text-5xl md:text-6xl font-bebas text-white mb-3 group-hover:text-gray-300 transition-colors duration-300">
                {styles.length}+
              </div>
              <div class="text-sm font-inter text-gray-400 uppercase tracking-widest">
                ESTILOS DIFERENTES
              </div>
              <div class="w-16 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </FadeInSection>
          </div>
        </div>
      </section>
    </ParallaxContainer>

    <!-- Estilos Destacados Cinematográficos -->
    <section class="py-24 bg-gradient-to-b from-black via-gray-900 to-black relative">
      <div class="max-w-7xl mx-auto px-6">
        <FadeInSection delay={0.2} intensity="high" class="text-center mb-16 space-y-6">
          <StaggerText 
            text="ESTILOS DESTACADOS"
            element="h2" 
            class="text-4xl md:text-5xl font-bebas text-white tracking-wider"
            delay={0.3}
            staggerDelay={0.05}
          />
          <p class="text-lg text-gray-400 font-inter max-w-3xl mx-auto leading-relaxed">
            Nuestros artistas dominan una amplia variedad de estilos, desde los más tradicionales hasta las tendencias más modernas.
          </p>
          <div class="w-24 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto"></div>
        </FadeInSection>
        
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
          {featuredStyles.map((style, index) => (
            <FadeInSection delay={0.4 + (index * 0.1)} intensity="medium">
              <button 
                class="style-showcase-btn p-6 bg-gray-900 border border-gray-800 hover:border-white hover:bg-white hover:text-black transition-all duration-500 group w-full"
                data-style={style.name.toLowerCase().replace(/\s+/g, '-')}
              >
                <div class="text-center space-y-4">
                  <div class="w-16 h-16 mx-auto bg-black group-hover:bg-gray-900 flex items-center justify-center transition-colors duration-500">
                    <svg class="w-8 h-8 text-white group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                    </svg>
                  </div>
                  <h3 class="text-sm font-bebas text-white group-hover:text-black uppercase tracking-wider transition-colors duration-500">
                    {style.name}
                  </h3>
                </div>
              </button>
            </FadeInSection>
          ))}
        </div>
      </div>
    </section>

    <!-- Filtros del Portfolio Cinematográficos -->
    <section class="py-16 bg-black relative">
      <div class="max-w-7xl mx-auto px-6">
        <FadeInSection delay={0.2} intensity="high">
          <PortfolioFilters />
        </FadeInSection>
      </div>
    </section>

    <!-- Grid del Portfolio Cinematográfico -->
    <section class="py-16 bg-gradient-to-b from-black to-gray-900 relative">
      <div class="max-w-7xl mx-auto px-6">
        <FadeInSection delay={0.3} intensity="high">
          <PortfolioGrid />
        </FadeInSection>
      </div>
    </section>

    <!-- Sección de Artistas Cinematográfica -->
    <ParallaxContainer speed={0.2} intensity="medium" class="py-32 bg-gradient-to-b from-gray-900 via-black to-gray-900 relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-black/40 to-transparent"></div>
      <section class="max-w-7xl mx-auto px-6 relative z-10">
        <FadeInSection delay={0.2} intensity="high" class="text-center mb-20 space-y-6">
          <StaggerText 
            text="CONOCE A NUESTROS ARTISTAS"
            element="h2" 
            class="text-5xl md:text-6xl font-bebas text-white tracking-wider"
            delay={0.3}
            staggerDelay={0.05}
          />
          <p class="text-xl text-gray-300 font-inter max-w-3xl mx-auto leading-relaxed">
            Cada trabajo en nuestro portfolio es el resultado de la experiencia, técnica y visión artística única de nuestros talentosos profesionales.
          </p>
          <div class="w-32 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto"></div>
        </FadeInSection>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
          {artists.map((artist, index) => (
            <FadeInSection delay={0.4 + (index * 0.2)} intensity="medium">
              <div class="text-center group space-y-6">
                <SlideInImage 
                  direction="up"
                  delay={0.5 + (index * 0.2)}
                  intensity="medium"
                  class="aspect-square overflow-hidden relative"
                >
                  <img 
                    src={`https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=cinematic%20professional%20tattoo%20artist%20${artist.name.toLowerCase()}%20portrait%20black%20and%20white%20dramatic%20studio%20lighting%20moody&image_size=square_hd`}
                    alt={`${artist.name} - Artista de tatuajes`}
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                    loading="lazy"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                </SlideInImage>
                
                <div class="space-y-4">
                  <h3 class="text-3xl font-bebas text-white uppercase tracking-wider group-hover:text-gray-300 transition-colors duration-300">
                    {artist.name}
                  </h3>
                  
                  <div class="flex flex-wrap justify-center gap-3">
                    {artist.specialties.slice(0, 2).map((specialty) => (
                      <span class="px-4 py-2 bg-gray-800 text-white text-sm font-inter uppercase tracking-wider border border-gray-700 hover:border-gray-500 transition-colors duration-300">
                        {specialty}
                      </span>
                    ))}
                  </div>
                  
                  <p class="text-gray-400 font-inter text-lg">
                    {artist.portfolio.length} trabajos en portfolio
                  </p>
                  
                  <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4">
                    <Button 
                      href={`/artistas/${artist.slug}`} 
                      variant="secondary" 
                      size="sm"
                    >
                      Ver Perfil
                    </Button>
                    <Button 
                      href={`/reservas?artist=${artist.slug}`} 
                      variant="primary" 
                      size="sm"
                    >
                      Reservar
                    </Button>
                  </div>
                </div>
              </div>
            </FadeInSection>
          ))}
        </div>
      </section>
    </ParallaxContainer>

    <!-- CTA Final Cinematográfico -->
    <ParallaxContainer speed={0.3} intensity="high" class="py-32 bg-gradient-to-b from-black via-gray-900 to-black relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-black/60 via-transparent to-black/60"></div>
      <div class="absolute inset-0">
        <div class="w-full h-full bg-gradient-to-t from-black via-transparent to-black opacity-80"></div>
      </div>
      <section class="max-w-4xl mx-auto px-6 text-center relative z-10">
        <FadeInSection delay={0.2} intensity="high" class="space-y-8">
          <StaggerText 
            text="¿LISTO PARA TU PRÓXIMO TATUAJE?"
            element="h2" 
            class="text-5xl md:text-7xl font-bebas text-white tracking-wider leading-tight"
            delay={0.3}
            staggerDelay={0.08}
          />
          <div class="w-24 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto"></div>
          <p class="text-xl md:text-2xl text-gray-300 font-inter max-w-3xl mx-auto leading-relaxed">
            Nuestros artistas están listos para convertir tu visión en una obra de arte permanente. Reserva tu consulta hoy mismo.
          </p>
        </FadeInSection>
        
        <FadeInSection delay={0.6} intensity="medium" class="pt-12">
          <div class="flex flex-col sm:flex-row gap-6 justify-center">
            <Button href="/reservas" variant="primary" size="lg">
              Reservar Consulta
            </Button>
            <Button href="/artistas" variant="secondary" size="lg">
              Ver Artistas
            </Button>
          </div>
        </FadeInSection>
        
        <!-- Elementos decorativos -->
        <div class="absolute -top-20 -left-20 w-40 h-40 bg-white/5 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-20 -right-20 w-60 h-60 bg-white/3 rounded-full blur-3xl"></div>
      </section>
    </ParallaxContainer>
  </main>
  
  <Footer />
</Layout>

<script>
  // Funcionalidad adicional para la página de portfolio
  class PortfolioPage {
    constructor() {
      this.styleShowcaseBtns = document.querySelectorAll('.style-showcase-btn');
      this.init();
    }
    
    init() {
      // Event listeners para botones de estilos destacados
      this.styleShowcaseBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
          const style = e.currentTarget.dataset.style;
          this.filterByStyle(style);
          
          // Scroll to filters section
          const filtersSection = document.querySelector('.portfolio-filters');
          if (filtersSection) {
            filtersSection.scrollIntoView({ 
              behavior: 'smooth', 
              block: 'start' 
            });
          }
        });
      });
    }
    
    filterByStyle(style) {
      // Update style filter
      const styleFilter = document.getElementById('style-filter');
      if (styleFilter) {
        styleFilter.value = style;
        
        // Trigger change event to apply filter
        const changeEvent = new Event('change', { bubbles: true });
        styleFilter.dispatchEvent(changeEvent);
      }
      
      // Update quick filter buttons
      const quickFilterBtns = document.querySelectorAll('.quick-filter-btn');
      quickFilterBtns.forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.filter === style) {
          btn.classList.add('active');
        }
      });
    }
  }
  
  // Initialize page functionality when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    new PortfolioPage();
  });
</script>